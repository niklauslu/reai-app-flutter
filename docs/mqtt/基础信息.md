## 连接配置

### 基本连接信息
- **服务器地址**: `101.126.20.157` (本地测试) 或具体服务器IP
- **端口**: `1883`

### 设备账号 (device_user)
- **用户名**: `device_user`
- **密码**: `eedd1012ab2546fc3c41a0ab3b629ffb`
- **权限**:
  - 可写入: `device/+/status` (设备状态上报)
  - 可读取: `device/+/request` (接收中控请求)
  - 可写入: `device/+/response` (返回中控响应)
  - 可写入: `message/+/request` (设备主动请求)e
  - 可读取: `message/+/response` (读取响应消息)


## 主题结构

```
device/
├── {device_id}/
│   ├── status     # 设备状态上报 (设备→中控)
│   ├── request    # 请求消息 (双向)
│   └── response   # 响应消息 (设备→中控)
```

## 数据格式

所有请求和响应消息使用统一的JSON格式：

```json
{
  "id": "unique_request_id",
  "method": "method_name",
  "params": {},  // 请求参数
  "result": {}   // 响应结果
}
```

### 请求消息格式
- 发布到 `device/{device_id}/request`
- 包含 `id`, `method`, `params` 字段
- `result` 字段为空或省略

### 响应消息格式
- 发布到 `device/{device_id}/response`
- 包含 `id`, `method`, `result` 字段
- `params` 字段为空或省略
- `id` 与对应请求的 `id` 相同
- 如果`result`里面包含 index，代表是分条返回，取item字段，当index=-1的时候结束

### 设备状态消息格式
- 发布到 `device/{device_id}/status`
- 包含设备在线状态、电量、录音状态等信息
- 中控通过此主题判断设备上下线
- status 字段包含设备状态信息
- 上线发送 online，下线发送 offline，遗嘱消息是 发送 status offline
```js
// 设备状态接口
export interface DeviceStatus {
  deviceId: string;
  type: 'online' | 'offline';
  deviceName?: string;
  deviceType?: string;
  timestamp: number;
}
```
